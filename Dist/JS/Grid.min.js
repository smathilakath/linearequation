/*
 linnear_equation_challenge 2015-11-23 
*/
function Grid(a,b,c,d,e){this.padding=e?e:10,this.maxWidth=c?c:500,this.maxHeight=d?d:500,this.graph=b?b:$("#graph"),this.midX=250+this.padding,this.midY=250+this.padding,this.data=a,this.calculateRange=function(){if(this.data.length<2)return 5;for(var b=a[1],c=1;c<a.length;c+=2)Math.abs(a[c])>Math.abs(b)&&(b=a[c]);return Math.abs(Math.ceil(b))+1},this.calculateDomain=function(){if(this.data.length<2)return 5;for(var b=a[0],c=0;c<a.length;c+=2)Math.abs(a[c])>Math.abs(b)&&(b=a[c]);return Math.abs(Math.ceil(b))+1},this.plotData=function(){var a=document.createElementNS("http://www.w3.org/2000/svg","g");a.setAttribute("id","data"),this.graph.append(a);for(var b=0;b<this.data.length;b+=2){var c=this.data[b]*(this.maxWidth/(2*this.domain))+this.midX,d=-1*this.data[b+1]*(this.maxHeight/(2*this.range))+this.midY,e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttribute("r",3),e.setAttribute("cx",c),e.setAttribute("cy",d),e.setAttribute("style","stroke:rgb(70,70,200);stroke-width:1;"),a.appendChild(e);var f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttribute("x",c-23),f.setAttribute("y",d-5),f.setAttribute("fill","#000"),f.textContent="("+this.data[b].toFixed(1)+","+this.data[b+1].toFixed(1)+")",a.appendChild(f)}},this.buildAxisY=function(){var a=this.padding,b=this.maxHeight+this.padding;group=document.createElementNS("http://www.w3.org/2000/svg","g"),group.setAttribute("id","yAxis"),this.graph.append(group);var c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("x1",this.midX),c.setAttribute("y1",a),c.setAttribute("x2",this.midX),c.setAttribute("y2",b),c.setAttribute("style","stroke:rgb(0,0,0);stroke-width:1;"),group.appendChild(c);for(var d=a;b>=d;)c=document.createElementNS("http://www.w3.org/2000/svg","line"),c.setAttribute("x1",this.midX-10),c.setAttribute("y1",d),c.setAttribute("x2",this.midX+10),c.setAttribute("y2",d),c.setAttribute("style","stroke:rgb(0,0,0);stroke-width:1;"),group.appendChild(c),d+=this.maxHeight/(2*this.range);var e=document.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("x",this.midX-25),e.setAttribute("y",a+10),e.setAttribute("fill","#000"),e.textContent=this.range,group.appendChild(e),e=document.createElementNS("http://www.w3.org/2000/svg","text"),e.setAttribute("x",this.midX-25),e.setAttribute("y",b+10),e.setAttribute("fill","#000"),e.textContent=-1*this.range,group.appendChild(e)},this.buildAxisX=function(){var a=this.padding,b=this.maxWidth+this.padding,c=document.createElementNS("http://www.w3.org/2000/svg","g");c.setAttribute("id","xAxis"),this.graph.append(c);var d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",a),d.setAttribute("y1",this.midY),d.setAttribute("x2",b),d.setAttribute("y2",this.midY),d.setAttribute("style","stroke:rgb(0,0,0);stroke-width:1;"),c.appendChild(d);for(var e=a;b>=e;)d=document.createElementNS("http://www.w3.org/2000/svg","line"),d.setAttribute("x1",e),d.setAttribute("y1",this.midY-10),d.setAttribute("x2",e),d.setAttribute("y2",this.midY+10),d.setAttribute("style","stroke:rgb(0,0,0);stroke-width:1;"),c.appendChild(d),e+=this.maxWidth/(2*this.domain);var f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttribute("x",a-10),f.setAttribute("y",this.midY+25),f.setAttribute("fill","#000"),f.textContent=-1*this.domain,c.appendChild(f),f=document.createElementNS("http://www.w3.org/2000/svg","text"),f.setAttribute("x",b-10),f.setAttribute("y",this.midY+25),f.setAttribute("fill","#000"),f.textContent=this.domain,c.appendChild(f)},this.clearGrid=function(){$("#xAxis").remove(),$("#yAxis").remove(),$("#data").remove()},this.setupGrid=function(){this.clearGrid(),this.graph.width(this.maxWidth+2*this.padding),this.graph.height(this.maxHeight+2*this.padding),this.range=this.calculateRange(),this.domain=this.calculateDomain(),this.buildAxisX(),this.buildAxisY(),this.plotData()},this.setupGrid()}